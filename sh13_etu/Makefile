# Sherlock 13 – Makefile

CC      := gcc
CFLAGS  := -Wall -Wextra -O2
SDL_CFLAGS := $(shell pkg-config --cflags sdl2 SDL2_image SDL2_ttf)
SDL_LIBS   := $(shell pkg-config --libs sdl2 SDL2_image SDL2_ttf)
THREAD  := -pthread

# -----------------------------------------------------------------------------
# Cibles principales
# -----------------------------------------------------------------------------
all: server sh13

# -----------------------------------------------------------------------------
# Serveur TCP (aucune dépendance SDL)
# -----------------------------------------------------------------------------
server: server.c
	$(CC) $(CFLAGS) $< -o $@

# -----------------------------------------------------------------------------
# Client graphique SDL2
# -----------------------------------------------------------------------------
sh13: sh13.c
	$(CC) $(CFLAGS) $< -o $@ $(SDL_CFLAGS) $(SDL_LIBS) $(THREAD)

# -----------------------------------------------------------------------------
# Nettoyage
# -----------------------------------------------------------------------------
clean:
	rm -f server sh13 *.o

.PHONY: all clean
